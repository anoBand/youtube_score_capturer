# History

제작 기간 03.16 ~ 09.10  

--- 
#1. v1~v3.  

유튜브 기타 커버 중 악보 표기 영상에서 악보 부분만 잘라서 pdf로 만드는 프로그램의 필요성을 느끼게 되어 프로젝트를 시작하게 되었다.  
첫 시작은 가장 쉬운 형식인 v1.
<a href="https://www.youtube.com/watch?v=F7sdNkpgBEc" target="_blank">
  <img width="1920" height="1080" 
       src="https://github.com/user-attachments/assets/7bac955b-70b9-4613-8623-08018eac5cf9" 
       alt="image" />
</a>
정적인 이미지가 일정 시간마다 넘어간다. 세로 부분의 영역만 정하면 그 영역만큼 잘라 이미지로 저장하고 프레임을 이동, 이전 프레임의 이미지와 다르면 다시 저장을 반복한다.  
편리하지만 용도가 매우 한정적이었다. 대부분의 악보표시 영상이 동적이기도 했고, 가로 부분의 영역 지정이 필요했기 때문  
<br>  
<a href="https://youtu.be/fVa98xnOnBU?si=C7JQadxbyK4SYpiq" target="_blank">
  <img width="1920" height="1080" 
       src="https://github.com/user-attachments/assets/6bd0ccca-8cfd-4c6d-a453-8e22e07ba757" 
       alt="image" />
</a>
v1의 경우 가로 영역 지정이 없었기 때문에 아래 부분만 추출하려 해도 우하단의 코드 영역이 계속 바뀌기 때문에 악보 부분인 좌하단만 추출하려 해도 우하단의 변화로 인해 중복되는 이미지 추출의 문제가 있었다.  
v2는 이러한 문제를 해결하기 위해 x축 시작과 끝, y축 시작과 끝을 지정하게 해 그 구간 내에서의 이미지 비교하도록 바꾸었다.  
이 또한 범용성 측면에서 문제를 가졌는데, 많은 기타 유튜버들이 악보 표시를 할 때 쓰는 프로그램인 '기타프로'가 동적으로 악보를 표시하기 때문에 그리고 이미 많은 악보 표기 영상들이 동적으로 악보를 표시하기 때문에 업그레이드가 필요했다.  
<br>
<a href="https://youtu.be/NpoAm3cnJxo?si=TiC4pk9G_DG-6Akc" target="_blank">
  <img width="1920" height="1080" 
       src="https://github.com/user-attachments/assets/168737f0-687b-4eef-86d6-f38edf9b8a5f" 
       alt="image" />
</a>
아까 말했던 기타프로 프로그램을 이용한 악보 송출이 대부분 이러한 형식이다. 이미지를 클릭해 영상을 직접 보면 알겠지만 타임라인이 움직임에 따라 악보스크린이 자동으로 넘어가고, 이전 또는 다음 악보가 짤려서 악보 영역에 같이 나오기도 한다.  
이 경우 v1, v2와 달리 매 프레임을 비교하면 동적으로 전환되는 과정의 이미지까지 다른, 즉 '다음 악보' 로 인식되기 때문에 추출하는 악보 이미지 중에서도 '진짜 악보'로 인식시키는 로직이 필요했다.  
'평균 고정 시간'이라는 네이밍이 깔끔하진 않지만, 풀어 설명하자면 같은 이미지가 2초 이상 유지될 경우 진짜 악보로 인식해 pdf로 추출할 이미지로 저장하도록 했다.  
동적으로 바뀔 다음 악보, 바뀐 다음 악보의 자투리 이미지가 같이 저장되는 문제는 찝찝하게 남아있었지만 이를 자동으로 잘라내는 기능을 추가하기에는 구현 난이도가 또 올라가기 때문에 유기했다.  
기능적 구현을 마무리하여 사용자에게 배포할 실행 파일로 만들고, Tkinter GUI를 사용해 00년대에나 볼 복돌 스타일의 프로그램으로 만들어 구글 드라이브를 통해 배포하였다.  
여기까지가 6월까지 끝냈었던 프로젝트이다.  

---
#2. app.py와 웹 스트리밍  

개인적으로만 사용하다가 밴드 동아리 부원 등 몇몇 사람들이 사용하기 쉽게 웹에서 구동시키고 싶다는 생각은 .exe 프로그램 완성 이후부터 계속 가졌었지만, 유튜브 영상을 읽어 다운로드하는 정도의 연산과 저장공간을 고려해 도전하지 않고 있었다.  
<br>
25-1학기가 끝나고 시간도 많아지자 이를 구현하는 데 관심을 갖게 되어 oracle 무료플랜, aws ec2 등 시도해보았는데 기초지식이 없는 상태에서 바이브코딩만으로 시도한 결과인지 삽질을 일주일 가량 한 것 같다.  
직접 찾아보면서 코딩애플의 elastic beanstalk 튜토리얼을 보게 되고 이 방향으로 마음을 다잡았다. 다잡았었다.  
<br>
이것도 어느정도 삽질 후에 elastic beanstalk에 내 파일을 업로드 성공하고, ffmpeg가 설치되지 않는 문제를 해결하기 위해 코드파일 자체의 ffmpeg 의존성을 없애고, 실제 웹 구동으로 pdf 다운로드까지 완성...한 줄 알았지만  
결국 유튜브 봇 탐지에 걸리게 되었다. 실제로 봇이기 때문에 일 잘 하는 구글에 매수버튼을 누르기 전 봇 우회방법을 생각해보니 쿠키파일 이용, 프록시 설정 등이 있었지만 쿠키파일은 어느정도 의미있게 작동했지만 5분마다 갱신해줘야 하는데다 ip별로 작동하지 않을 수 있다는 문제가 있었고 프록시는 비용과 숙련도 문제로 시도했지면 별 성과를 거두지 못했다.  

---
#3. (임시적) 합의점, 결과  

웹으로 사용자가 직접 악보 추출 서비스를 이용하게 하지는 못했지만 반대로 생각하면 이용 가이드 제작, 서버 비용 부담에 대한 문제도 없어진 셈인라 좋았쓰이고 깃허브 레포에서 썩히는 것도 아까워 동아리 부원들에게 배포했다.  
이미 로컬에서만 돌아가는 웹서비스는 만든 셈이니 악보 추출에 대한 요청 폼은 비교적 쉬운 편이었다. 텍스트박스를 채우고 제출하면 개인 이메일로 오는 시스템인데 formspree를 이용하니 정적 사이트인 github pages에서도 무료로 사용할 수 있어 편리했다.  
<br>
대부분 바이브코딩으로 만든 셈이라 컴공인 입장에서 아쉽긴 하지만 역으로 바이브코딩의 단점과 일종의 사용 가이드도 제작하면서 알게 되었고 이후로 코드리뷰도 해야겠다는 생각이 든다.
